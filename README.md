# Тестовое задание на QA Engineer

Проект содержит автотесты на **Python + Playwright + pytest** для проверки типовых пользовательских сценариев.

## Стек

- Python
- Playwright (`pytest-playwright`)
- pytest

## Подготовка окружения

Порядок действий для запуска (Windows):

```bash
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
playwright install
```

Как Playwright загрузит необходимые для своей работы данные, тесты можно запускать.

## Запуск тестов

Базовый запуск всех тестов:

```bash
pytest
```
 
Для отладки можно запускать отдельные файлы, например:

```bash
pytest tests/test_application_form.py
pytest tests/test_region.py
pytest tests/test_status_code.py
```

## Реализованные проверки

### 1. Проверка HTTP-кода главной страницы

Файл: `tests/test_status_code.py`

- Отправляем HTTP-запрос к главной странице `https://piter-online.net/` через `page.request`.
- Проверяем, что статус ответа **200**.
- Тесту задано определенное количество попыток и выполняется **5 раз** подряд в рамках одного запуска:
  - позволяет поймать возможные нестабильности на уровне сети/инфраструктуры.

### 2. Автоматизация подачи заявки

Файл: `tests/test_application_form.py`  
Page Object: `pages/main_page.py`

Сценарий:

1. Открыть главную страницу.
2. Выполнить поиск по адресу:
   - Улица: `Тестовая линия`
   - Дом: `1`
3. Открыть форму заявки по найденному адресу.
4. Заполнить форму:
   - Имя: `Автотест`
   - Телефон: `1111111111`
5. Отправить форму.
6. Проверить, что пользователь видит **подтверждение успешной отправки заявки**.

Тест также настроен на **5 запусков**, что помогает отловить ошибки или баги.

### 3. Поиск по адресу / смена региона

Файл: `tests/test_region.py`  
Page Object: `pages/main_page.py`

Сценарий:

1. Открыть главную страницу.
2. Открыть селектор региона.
3. Выбрать регион (например, `Санкт-Петербург`).
4. Проверить, что выбранный регион корректно отображается в шапке сайта.

Тест запустится на 5 повторов.

## Структура проекта

- `pages/` — Page Object
- `tests/` — автотесты:
  - `test_status_code.py` — проверка HTTP 200.
  - `test_application_form.py` — сценарий отправки заявки.
  - `test_region.py` — сценарий смены региона.
  - `test_seo.py` — проверка SEO-данных главной страницы.
- `requirements.txt` — зависимости.
- `pytest.ini` — базовая конфигурация pytest.

## SEO и отчётность

### SEO-проверки

Файл: `tests/test_seo.py`

- проверяется, что:
  - `<title>` главной страницы не пустой;
  - основной заголовок `h1` присутствует и видим;
  - `meta[name="description"]` существует и содержит текст.

### HTML-отчёт pytest

Для формирования HTML-отчёта используется плагин `pytest-html`.

Пример команды:

```bash
pytest --html=report.html --self-contained-html
```

В результате в корне проекта появится файл `report.html` с отчётом о последнем прогоне тестов.

## Время выполнения задания

> **Время выполнения задания вышло около 4-5 часов**

